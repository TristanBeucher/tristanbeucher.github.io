{% assign id = include.id | default: page.slug | default: page.title | slugify %}
<div class="mw-carousel" id="carousel-{{ id }}" aria-roledescription="carousel">
  <div class="mw-carousel__viewport" role="group" aria-label="{{ include.aria_label | default: 'Galerie d’images' }}">
    <ul class="mw-carousel__track" data-index="0">
      {% for item in include.items %}
      <li class="mw-carousel__slide" data-slide="{{ forloop.index0 }}">
        <figure class="mw-carousel__figure">
          <img
            src="{{ item.src }}"
            alt="{{ item.alt | default: 'Image ' | append: forloop.index }}"
            loading="lazy"
            class="mw-carousel__img"
            width="1600" height="900"
            />
          {% if item.haiku or item.caption %}
          <figcaption class="mw-carousel__caption">
            {% if item.haiku %}
              <span class="mw-carousel__haiku">{{ item.haiku | newline_to_br }}</span>
            {% endif %}
            {% if item.caption %}
              <span class="mw-carousel__legend">{{ item.caption }}</span>
            {% endif %}
          </figcaption>
          {% endif %}
        </figure>
      </li>
      {% endfor %}
    </ul>
  </div>

  <button class="mw-carousel__btn mw-carousel__btn--prev" aria-label="Image précédente" data-dir="-1">‹</button>
  <button class="mw-carousel__btn mw-carousel__btn--next" aria-label="Image suivante" data-dir="1">›</button>

  <div class="mw-carousel__dots" role="tablist" aria-label="Navigation des images">
    {% for item in include.items %}
      <button class="mw-carousel__dot" role="tab" aria-controls="carousel-{{ id }}-slide-{{ forloop.index0 }}" aria-label="Aller à l’image {{ forloop.index }}" data-to="{{ forloop.index0 }}"></button>
    {% endfor %}
  </div>
</div>
